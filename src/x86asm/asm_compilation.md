# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤ –∞—Å—Å–µ–º–±–ª–µ—Ä

–î–ª—è –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º—ã—Ö —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∞—Å—Å–µ–º–±–ª–µ—Ä --- –æ–¥–Ω–æ –∏–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö
–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –∫–æ–¥–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞. –í —Å–ª—É—á–∞–µ C–∏ –º–æ–∂–Ω–æ
—É–≤–∏–¥–µ—Ç—å, –≤ –∫–∞–∫–æ–π –∞—Å—Å–µ–º–±–ª–µ—Ä —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∞, –ø–µ—Ä–µ–¥–∞–≤ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É —Ñ–ª–∞–≥
`-S`.

–°–∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º —ç—Ç–æ—Ç –∫–æ–¥ –≤ –∞—Å—Å–µ–º–±–ª–µ—Ä.

```c
// aplusb.c

void aplusb(int a, int b) {
  return a + b;
}
```

–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–º–µ—é—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `.S`, –∏–Ω–æ–≥–¥–∞ –µ—â–µ –±—ã–≤–∞–µ—Ç
–º–∞–ª–µ–Ω—å–∫–∞—è `.s`. –û—Ç–ª–∏—á–∞–µ—é—Å—è –æ–Ω–∏ —Ç–æ–ª—å–∫–æ —Ç–µ–º, —á—Ç–æ –≤ `.S`-—Ñ–∞–π–ª–∞—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
–º–∞–∫—Ä–æ—Å—ã –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (`#include`, `#define` –∏ –¥—Ä—É–≥–∏–µ), –∞ –≤ `.s` --- –Ω–µ–ª—å–∑—è.

–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ —Å–ª–æ–∂–∏–ª–æ—Å—å –¥–≤–∞ –¥–∏–∞–ª–µ–∫—Ç–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ x86 --- Intel –∏ AT&T.
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –ø–æ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ –ø–∏—à—É—Çc—è –≤ –¥–∏–∞–ª–µ–∫—Ç–µ Intel, –æ–Ω
—Å—á–∏—Ç–∞–µ—Ç—Å—è –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–º. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ —á–∞—â–µ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å
–¥–∏–∞–ª–µ–∫—Ç AT&T ü§∑. –ï–≥–æ –º—ã –æ–±—Å—É–¥–∏–º –ø–æ–∑–∂–µ, –∞ –ø–æ–∫–∞ —á—Ç–æ –ø–æ–¥–Ω–∏–º–µ–º —Ñ–ª–∞–≥ `-masm=intel`.

```bash
gcc aplusb.c -masm=intel -S -O2 -o aplusb.S
```

–ü–æ–ª—É—á–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫.

```x86asm
// aplusb.S

	.file	"aplusb.c"
	.intel_syntax noprefix
	.text
	.p2align 4
	.globl	aplusb
	.type	aplusb, @function
aplusb:
.LFB0:
	.cfi_startproc
	lea	eax, [rdi+rsi]
	ret
	.cfi_endproc
.LFE0:
	.size	aplusb, .-aplusb
	.ident	"GCC: (GNU) 14.2.1 20240910"
	.section	.note.GNU-stack,"",@progbits
```

–í –∫–æ–¥–µ –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

- –ú–µ—Ç–∫–∏ (`aplusb`, `.LFB0`, `.LFE1`). –û–Ω–∏ —Å—Ç–∞–≤—è—Ç—Å—è –ø–µ—Ä–µ–¥ —Ñ—É–Ω–∫—Ü–∏—è–º–∏,
  –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–º–∏ –∫—É—Å–æ—á–∫–∞–º–∏ –∫–æ–¥–∞, –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö
  –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –ù–∞ –º–µ—Ç–∫–∏ –º–æ–∂–Ω–æ —Å—Å—ã–ª–∞—Ç—å—Å—è –≤ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω–æ–º –∫–æ–¥–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä—ã–≥–Ω—É—Ç—å
  –Ω–∞ –º–µ—Ç–∫—É —Å –ø–æ–º–æ—â—å—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ [`jmp`](https://www.felixcloutier.com/x86/jmp)
  --- –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–æ–≥–∞ `goto` –∏–∑ –°–∏.
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (`lea`, `ret`). –≠—Ç–æ "–∞—Ç–æ–º–∞—Ä–Ω—ã–µ" –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç
  –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä. –û–Ω–∏ –º–æ–≥—É—Ç –æ–ø–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ (`rdi`, `rsi`, `eax`),
  –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏ –∏–ª–∏ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –≤ –ø–∞–º—è—Ç—å.
- –°–ª—É–∂–µ–±–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã (`.text`, `.globl`, `.section`). –í –æ—Å–Ω–æ–≤–Ω–æ–º –æ–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞
  –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏—Ç–æ–≥–æ–≤–æ–≥–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞. –ù–∞–ø—Ä–∏–º–µ—Ä,
  `.globl aplusb` _—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç_ —Ñ—É–Ω–∫—Ü–∏—é --- –∏–Ω–∞—á–µ –æ–Ω–∞ –±—ã–ª–∞ –±—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –ø—Ä–∏
  –ª–∏–Ω–∫–æ–≤–∫–µ. –ê `.intel_syntax noprefix` –≤–∫–ª—é—á–∞–µ—Ç —Å–∏–Ω—Ç–∞–∫–∏—Å Intel –≤–º–µ—Å—Ç–æ
  –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ AT&T.

# `objdump`

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∞ —è–∑—ã–∫–µ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–¥–∏–Ω –≤ –æ–¥–∏–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –º–∞—à–∏–Ω–Ω—ã–º
–∫–æ–¥–∞–º, –ø–æ—ç—Ç–æ–º—É –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ _–¥–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞—Ç—å_  --- –ø–æ–ª—É—á–∏—Ç—å –ø–æ
–±–∏–Ω–∞—Ä–Ω–∏–∫—É –∫–æ–¥ –Ω–∞ —è–∑—ã–∫–µ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞. –ú—ã –±—É–¥–µ–º —ç—Ç–æ –¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã
[`objdump`](https://linux.die.net/man/1/objdump). –§–ª–∞–≥ `-d` –æ–∑–Ω–∞—á–∞–µ—Ç
"disassemble", `-M` –∑–∞–¥–∞–µ—Ç –¥–∏–∞–ª–µ–∫—Ç –∞—Å—Å–µ–º–±–ª–µ—Ä–∞.

```bash
gcc aplusb.c -c -o aplusb.o
objdump -d -M intel aplusb
```

–í—ã–≤–æ–¥ –ø–æ—Ö–æ–∂ –Ω–∞ —Ç–æ, —á—Ç–æ —É–∂–µ –≤–∏–¥–µ–ª–∏ –≤—ã—à–µ.

```x86asm
aplusb.o:     file format elf64-x86-64


Disassembly of section .text:

0000000000000000 <aplusb>:
   0:   8d 04 37                lea    eax,[rdi+rsi*1]
   3:   c3                      ret
```

–°–ª–µ–≤–∞ –∑–∞–ø–∏—Å–∞–Ω—ã _–æ–ø–∫–æ–¥—ã_ --- –±–∞–π—Ç—ã, –∫–æ—Ç–æ—Ä—ã–º–∏ –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∞ —Å–ø—Ä–∞–≤–∞ –∏—Ö
_–º–Ω–µ–º–æ–Ω–∏–∫–∏_ --- —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–µ (–µ—Å–ª–∏ —á–µ—Å—Ç–Ω–æ, –Ω–µ –æ—á–µ–Ω—å) –Ω–∞–∑–≤–∞–Ω–∏—è. –û–¥–Ω–∏ –∏ —Ç–µ –∂–µ
–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –º–æ–≥—É—Ç –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ä–∞–∑–Ω—ã–º–∏ –º–Ω–µ–º–æ–Ω–∏–∫–∞–º–∏. –í –Ω–∞—à–µ–º –¥–∏–∑–∞—Å—Å–µ–º–±–ª–µ—Ä–µ —á—É—Ç—å
–ø–æ-–¥—Ä—É–≥–æ–º—É —Å—Ç–∞–ª –≤—ã–≥–ª—è–¥–µ—Ç—å –≤—ã–∑–æ–≤ [`lea`](https://www.felixcloutier.com/x86/lea).

–ü—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Ç–∞–∫–∂–µ –≤—ã—Ä–µ–∑–∞—é—Ç—Å—è –º–µ—Ç–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∏–Ω–∞–ª–∏—Å—å —Å `.L`. –°—á–∏—Ç–∞–µ—Ç—Å—è,
—á—Ç–æ –æ–Ω–∏ —Å–ª—É–∂–µ–±–Ω—ã–µ --- –æ–±—ã—á–Ω–æ –ø–æ–¥ –Ω–∏–º–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ –≤–µ—Ç–∫–∏ `if` –∏–ª–∏ —Ç–µ–ª–æ
—Ü–∏–∫–ª–∞. –í –∏—Ç–æ–≥–æ–≤–æ–º –±–∏–Ω–∞—Ä–Ω–∏–∫–µ —É –Ω–∏—Ö –Ω–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–π, –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ–≤—ã–µ –∞–¥—Ä–µ—Å–∞. 

# Godbolt

–ò–Ω–æ–≥–¥–∞ –≤–º–µ—Å—Ç–æ `objdump` —É–¥–æ–±–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [godbolt](https://godbolt.org/)
(—Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–∞–∫ compiler-explorer) --- –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–≤, –Ω–∞–∑–≤–∞–Ω–Ω—ã–π –ø–æ —Ñ–∞–º–∏–ª–∏–∏ [–∞–≤—Ç–æ—Ä–∞](https://github.com/mattgodbolt).
Godbolt —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–π –∫–æ–¥ –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ
–æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –≤–∞—à–∏–º –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º. –ï—â–µ –æ–Ω —É–º–µ–µ—Ç –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å, –∫–∞–∫–∏–º –∏–º–µ–Ω–Ω–æ —Å—Ç—Ä–æ–∫–∞–º
–∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ç—Ä–æ–∫–∏ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞. 

–•–æ—Ä–æ—à–∏–π —Å–ø–æ—Å–æ–± –Ω–∞—É—á–∏—Ç—å—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ --- –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —á—Ç–æ-—Ç–æ
–Ω–∞–ø–∏—Å–∞—Ç—å –Ω–∞ –°–∏, –∞ –ø–æ—Ç–æ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á–µ—Ä–µ–∑ godbolt, –∫–∞–∫–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å
–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ üòä.

